---
title: Users and roles
description: Learn how to manage users and roles.
---

import { Callout } from 'nextra/components'
import { Tabs, Tab } from 'nextra/components'

# Users and roles

In the Memgraph Community Edition you can create users and assign them
passwords, but all the other features regarding the security (such as assigning
user roles, privileges, and label-based access control) are Enterprise features. 

Most databases used in production have multiple users accessing and modifying
data within the database. This might pose a serious security concern for the
system administrators that wish to grant only certain privileges to certain
users. A typical example would be an internal database of some company which
tracks data about their employees. Naturally, only certain users of the database
should be able to perform queries which modify that data.

At Memgraph, we provide the administrators with the option of granting, denying
or revoking a certain set of privileges to some users or groups of users (i.e.
users that are assigned a specific user role), thereby eliminating such security
concerns.

## Creating users

Creating a user can be done by executing the following command:

```cypher
CREATE USER user_name [IDENTIFIED BY 'password'];
```

If the username is an email address, you need to enclose it in backticks (``` ` ```):

```cypher
CREATE USER `alice@memgraph.com` IDENTIFIED BY '0042'; 
``` 

If you want to create a username that includes a space character, you must set
the `--auth-user-or-role-regex` flag to include spaces. For example,
`--auth-user-or-role-name-regex=[a-zA-Z0-9_.+\-@ ]+`.

If the user should authenticate themselves on each session, i.e. provide their
password on each session, the part within the brackets is mandatory. Otherwise,
the password is set to `null` and the user will be allowed to log-in using
any password, provided that they use the correct username.

To set or alter a user's password run the following command:

```cypher
SET PASSWORD FOR user_name TO 'new_password';
```

Setting the users's password to null removes the password, allowing the user to
log-in using any password:

```cypher
SET PASSWORD FOR user_name TO null;
```
To delete a user run the following command:

```cypher
DROP USER user_name;
```

### Password encryption algorithm

Memgraph offers multiple password encryption algorithms:
* BCrypt
* SHA256
* SHA256 with multiple iterations (currently set to 1024 iterations)

The above algorithms can be specified at runtime using the flag `--password-encryption-algorithm` with the
appropriate values of `bcrypt`, `sha256` or `sha256-multiple`.

**BCrypt**
This algorithm is the default algorithm for password encryption. It's the most secure algorithm and has the best
protection against brute-force attack. However, if you're running connecting multiple concurrent enterprise users with
passwords at the same time, it may not be the best choice for you as you might experience slower performance. The performance
is slower only during authentication of the users, and should not degrade once the connection has been established.

**SHA256 and SHA256 with multiple iterations**
SHA256 is an encryption algorithm that's usually not used for password encryption but is fast and secure enough to
offer optimal performance when running a lot of concurrent opening connections to Memgraph.

## Authentication

<Tabs items={['Docker 🐳', 'Linux']}>
<Tab>

**`memgraph` and `memgraph-mage` images**

If you are using Docker and `memgraph` or `memgraph-mage` image enter username
and password when connecting manually to Memgraph Lab. 

If you are connecting with mgconsole you should add the username and password
flags to the `docker run` command: 

```terminal
docker run -it --entrypoint=mgconsole memgraph/memgraph --host CONTAINER_IP --username=<username> --password=<password>
```

Example:

```terminal
docker run -it --entrypoint=mgconsole memgraph/memgraph --host 172.17.0.2 --username=vlasta --password=vp
```

</Tab>
<Tab>

If you are using Linux and connecting with Memgraph Lab, select *Connect
Manually* and enter username (and password). 

When connecting with mgconsole, set
the `--username` and `--password` flags:

```terminal
./mgconsole --host 127.0.0.1 --port 7687 --username <username> --password <password>
```

Example:

```terminal
./mgconsole --host 127.0.0.1 --port 7687 --username vlasta --password vp
```
   
</Tab>
</Tabs>

## Owners

The privileges of the owners of [streams](/data-streams) and
[triggers](/fundamentals/triggers#owners) are propagated to the corresponding
query executions:
- in case of streams for the queries returned by the transformations
- in case of triggers for trigger statements.

This means the execution of the queries will fail if the owner doesn't have the
required privileges. There are a few important details:
- If there are no existing users, no privilege check is performed similarly to
regular queries.
- If a stream or trigger is created without using a logged-in user
session, the owner will be `Null`. From the point when the first user is created
such streams and triggers will fail because the lack of owner is treated as a
user without any privileges, so no queries are allowed to be executed.
- Currently, there is no way of changing the owner. The only workaround for this
is to delete the stream or trigger and then create it again with another user.

The user who executes the `CREATE STREAM` query is going to be the owner of the stream.
Authentication and authorization are not supported in Memgraph Community, thus
the owner will always be `Null`, and the privileges are not checked in Memgraph
Community. In Memgraph Enterprise the privileges of the owner are used when
executing the queries returned from a transformation, in other words, the
execution of the queries will fail if the owner doesn't have the required
privileges.


